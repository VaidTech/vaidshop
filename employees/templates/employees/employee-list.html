{% extends 'accounts/dashboard.html' %}
{% block title %}Employee List {% endblock title %}
{% load crispy_forms_tags %}
{% block dashboard_content %}
<!-- Button -->
<div class="d-flex">
	<button class="btn btn-primary btn-round ml-auto mb-3" data-toggle="modal" data-target="#addRowModal">
		<i class="fa fa-plus"></i>
		Add Employee
	</button>
</div>

<!-- Modal -->
<div class="modal fade" id="addRowModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
	<div class="modal-dialog" role="document">
		<div class="modal-content" style="width: 50rem;">
			<div class="modal-header no-bd">
                <span class="fw-light m-auto">
                    <h1>Employee Registration</h1><hr>
				</span>
				
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body ml-4">
			<!-- success messages  -->
			<div id="emp-register-success-msg" ></div>
			<!-- error messages  -->
			<div id="emp-modal-error" style="color: red;">
				<p id="emp-modal-error-username"></p>
				<p id="emp-modal-error-date_of_birth"></p>
				<p id="emp-modal-error-pass1"></p>
				<p id="emp-modal-error-pass2"></p>
				<p id="emp-modal-error-pass3"></p>
				<p id="emp-modal-error-pass4"></p>
			</div>

            <form action="{% url 'employees:create' %}" method='POST' enctype="multipart/form-data" id="employee-registered-modal">
                {% csrf_token %}
                <div class="row">
                    <div class="col-md-6">
                        {{ form|crispy }}
                    </div>
                    <div class="col-md-6">
                        {{ employee_form|crispy }}
                    </div>
                </div>
                <br>
                <div class="modal-footer no-bd">
                    <button type="submit" id="addRowButton" class="btn btn-primary">Add</button>
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                </div>
            </form>
			</div>
		</div>
	</div>
</div>

<!-- Table -->

<table class="table table-head-bg-primary">
	<thead>
		<tr>
			<th scope="col">#</th>
			<th scope="col">Employee Name</th>
			<th scope="col">Mobile Number</th>
            <th scope="col">Gender</th>
            <th scope="col">Action</th>
		</tr>
	</thead>
	<tbody>
		{% for emp in owner.employee_set.all %}
		<tr>
			<td>{{ forloop.counter }}</td>
			<td>{{ emp.user.username }}</td>
			<td>{{ emp.mobile_number }}</td>
            <td>{{ emp.gender }}</td>
            <td> 
                <button type="button" data-toggle="tooltip" title="" class="btn btn-link btn-simple-primary btn-lg" data-original-title="Edit Task"> <i class="fa fa-edit"></i> </button> 
                <button type="button" data-toggle="tooltip" title="" class="btn btn-link btn-simple-danger" data-original-title="Remove"> <i class="fa fa-times"></i> </button>
            </td>
		</tr>
		{% endfor %}
	</tbody>
</table>



    


    
{% endblock dashboard_content %}






